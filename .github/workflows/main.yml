on: workflow_dispatch

jobs:
  test_job:
    runs-on: ubuntu-latest
    name: A sample job
    env:
      # 7 GiB by default on GitHub, setting this to 16 GiB
      NODE_OPTIONS: --max-old-space-size=16384
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Run scan
        id: scan
        uses: ankurv3rma/ts-action-test@main
        with:
          api: ${{ secrets.ENDOR_API }}
          api_key: ${{ secrets.ENDOR_API_KEY }}
          api_secret: ${{ secrets.ENDOR_API_SECRET }}
          scan_summary_output_type: "json"
          namespace: "testing-tenant"
          additional_args: "--output-filter=low"
      
      - name: Print Output
        run: echo ${{ steps.scan.outputs.result }}
          
#       - name: devops-actions/json-to-file@v1.0.0
#         with:
#           json: ${{ steps.scan.outputs.result }}
#           filename: "result.json"

      # Upload the result as an artifact
#       - name: Upload the result artifact
#         uses: actions/upload-artifact@v3.1.2
#         with:
#           name: results
#           path: ${{ github.workspace }}/result.json
